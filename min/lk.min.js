/*! js-cookie v3.0.0-rc.1 | MIT */
!function(e,t){var r,n;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,r=e.Cookies,(n=e.Cookies=t()).noConflict=function(){return e.Cookies=r,n})}(this,function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var t={read:function(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};return function r(n,o){function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),r=n.write(r,t);var s="";for(var a in i)i[a]&&(s+="; "+a,!0!==i[a]&&(s+="="+i[a].split(";")[0]));return document.cookie=t+"="+r+s}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],o={},i=0;i<r.length;i++){var s=r[i].split("="),a=s.slice(1).join("=");'"'===a[0]&&(a=a.slice(1,-1));try{var l=t.read(s[0]);if(o[l]=n.read(a,l),e===l)break}catch(e){}}return e?o[e]:o}},remove:function(t,r){i(t,"",e({},r,{expires:-1}))},withAttributes:function(t){return r(this.converter,e({},this.attributes,t))},withConverter:function(t){return r(e({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}})}(t,{path:"/"})}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){var t=Object.prototype.toString,r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(e){return"function"==typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}var s=RegExp.prototype.test;var a=/\S/;function l(e){return!function(e,t){return s.call(e,t)}(a,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,d=/\s+/,m=/\s*=/,p=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function h(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function v(){this.cache={}}h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},h.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var o,s,a=this,l=!1;a;){if(e.indexOf(".")>0)for(t=a.view,o=e.split("."),s=0;null!=t&&s<o.length;)s===o.length-1&&(l=i(t,o[s])),t=t[o[s++]];else t=a.view[e],l=i(a.view,e);if(l)break;a=a.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(t,n){var i=this.cache,s=i[t];return null==s&&(s=i[t]=function(t,n){if(!t)return[];var i,s,a,c=[],g=[],v=[],y=!1,w=!1;function _(){if(y&&!w)for(;v.length;)delete g[v.pop()];else v=[];y=!1,w=!1}function b(e){if("string"==typeof e&&(e=e.split(d,2)),!r(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(o(e[0])+"\\s*"),s=new RegExp("\\s*"+o(e[1])),a=new RegExp("\\s*"+o("}"+e[1]))}b(n||e.tags);for(var L,S,k,q,A,E,x=new h(t);!x.eos();){if(L=x.pos,k=x.scanUntil(i))for(var C=0,T=k.length;C<T;++C)l(q=k.charAt(C))?v.push(g.length):w=!0,g.push(["text",q,L,L+1]),L+=1,"\n"===q&&_();if(!x.scan(i))break;if(y=!0,S=x.scan(f)||"name",x.scan(u),"="===S?(k=x.scanUntil(m),x.scan(m),x.scanUntil(s)):"{"===S?(k=x.scanUntil(a),x.scan(p),x.scanUntil(s),S="&"):k=x.scanUntil(s),!x.scan(s))throw new Error("Unclosed tag at "+x.pos);if(A=[S,k,L,x.pos],g.push(A),"#"===S||"^"===S)c.push(A);else if("/"===S){if(!(E=c.pop()))throw new Error('Unopened section "'+k+'" at '+L);if(E[1]!==k)throw new Error('Unclosed section "'+E[1]+'" at '+L)}else"name"===S||"{"===S||"&"===S?w=!0:"="===S&&b(k)}if(E=c.pop())throw new Error('Unclosed section "'+E[1]+'" at '+x.pos);return function(e){for(var t,r=[],n=r,o=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),o.push(t),n=t[4]=[];break;case"/":o.pop()[5]=t[2],n=o.length>0?o[o.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(g))}(t,n)),s},v.prototype.render=function(e,t,r){var n=this.parse(e),o=t instanceof g?t:new g(t);return this.renderTokens(n,o,r,e)},v.prototype.renderTokens=function(e,t,r,n){for(var o,i,s,a="",l=0,c=e.length;l<c;++l)s=void 0,"#"===(i=(o=e[l])[0])?s=this.renderSection(o,t,r,n):"^"===i?s=this.renderInverted(o,t,r,n):">"===i?s=this.renderPartial(o,t,r,n):"&"===i?s=this.unescapedValue(o,t):"name"===i?s=this.escapedValue(o,t):"text"===i&&(s=this.rawValue(o)),void 0!==s&&(a+=s);return a},v.prototype.renderSection=function(e,t,o,i){var s=this,a="",l=t.lookup(e[1]);if(l){if(r(l))for(var c=0,u=l.length;c<u;++c)a+=this.renderTokens(e[4],t.push(l[c]),o,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(e[4],t.push(l),o,i);else if(n(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,i.slice(e[3],e[5]),function(e){return s.render(e,t,o)}))&&(a+=l)}else a+=this.renderTokens(e[4],t,o,i);return a}},v.prototype.renderInverted=function(e,t,n,o){var i=t.lookup(e[1]);if(!i||r(i)&&0===i.length)return this.renderTokens(e[4],t,n,o)},v.prototype.renderPartial=function(e,t,r){if(r){var o=n(r)?r(e[1]):r[e[1]];return null!=o?this.renderTokens(this.parse(o),t,r,o):void 0}},v.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},v.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);if(null!=n)return e.escape(n)},v.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["<%","%>"];var y=new v;return e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(r(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return y.render(e,t,n)},e.to_html=function(t,r,o,i){var s=e.render(t,r,o);if(!n(i))return s;i(s)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return c[e]})},e.Scanner=h,e.Context=g,e.Writer=v,e}),function(e,t){"use strict";var r={};e.PubSub=r;var n=e.define;!function(e){var t={},r=-1;function n(e){var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1}function o(e,t,r){try{e(t,r)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function i(e,t,r){e(t,r)}function s(e,r,n,s){var a,l=t[r],c=s?i:o;if(t.hasOwnProperty(r))for(a in l)l.hasOwnProperty(a)&&c(l[a],e,n)}function a(e,r,o,i){var a=function(e,t,r){return function(){var n=String(e),o=n.lastIndexOf(".");for(s(e,e,t,r);-1!==o;)o=(n=n.substr(0,o)).lastIndexOf("."),s(e,n,t,r)}}(e="symbol"==typeof e?e.toString():e,r,i);return!!function(e){for(var r=String(e),o=Boolean(t.hasOwnProperty(r)&&n(t[r])),i=r.lastIndexOf(".");!o&&-1!==i;)i=(r=r.substr(0,i)).lastIndexOf("."),o=Boolean(t.hasOwnProperty(r)&&n(t[r]));return o}(e)&&(!0===o?a():setTimeout(a,0),!0)}e.publish=function(t,r){return a(t,r,!1,e.immediateExceptions)},e.publishSync=function(t,r){return a(t,r,!0,e.immediateExceptions)},e.subscribe=function(e,n){if("function"!=typeof n)return!1;e="symbol"==typeof e?e.toString():e,t.hasOwnProperty(e)||(t[e]={});var o="uid_"+String(++r);return t[e][o]=n,o},e.subscribeOnce=function(t,r){var n=e.subscribe(t,function(){e.unsubscribe(n),r.apply(this,arguments)});return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var r;for(r in t)t.hasOwnProperty(r)&&0===r.indexOf(e)&&delete t[r]},e.unsubscribe=function(r){var n,o,i,s="string"==typeof r&&(t.hasOwnProperty(r)||function(e){var r;for(r in t)if(t.hasOwnProperty(r)&&0===r.indexOf(e))return!0;return!1}(r)),a=!s&&"string"==typeof r,l="function"==typeof r,c=!1;if(!s){for(n in t)if(t.hasOwnProperty(n)){if(o=t[n],a&&o[r]){delete o[r],c=r;break}if(l)for(i in o)o.hasOwnProperty(i)&&o[i]===r&&(delete o[i],c=!0)}return c}e.clearSubscriptions(r)}}(r),"function"==typeof n&&n.amd?n(function(){return r}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=r),exports.PubSub=r,module.exports=exports=r)}("object"==typeof window&&window||this),
/*! UTF-8

© kovrigin
Все права разрешены
красивый дизайн должен иметь красивый код®

https://github.com/htmlpluscss/

*/
(()=>{let e=null,t=window.innerWidth;window.addEventListener("resize",()=>{window.requestAnimationFrame(()=>{null===e&&(e=setTimeout(()=>{e=null,t!==window.innerWidth&&(t=window.innerWidth,PubSub.publish("windowWidthResize"))},100))})}),window.addEventListener("load",()=>{document.documentElement.style.setProperty("--transitionDefault",".3s"),document.documentElement.style.setProperty("--headerHeight",document.querySelector(".header").clientHeight+"px")}),window.cssAnimation=(e=>{let t,r,n=document.createElement("cssanimation");switch(e){case"animation":t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};break;case"transition":t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(r in t)if(void 0!==n.style[r])return t[r]}),window.isInViewport=(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=window.innerHeight}),window.sepNumber=function(e){return(e=(e=e.toString()).replace(/\s+/g,"")).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")},window.strToNumber=function(e){return parseInt(e.replace(/\s+/g,""),10)},window.declension=((e,t)=>{let r,n=e%100;return r=n>4&&n<21?t[2]:1==(n%=10)?t[0]:n>1&&n<5?t[1]:t[2]})})(),(e=>{if(e.length){const t=e=>{e.preventDefault(),history.back()};Array.from(e,e=>{document.referrer.indexOf(location.hostname)>0&&(e.onclick=t)})}})(document.querySelectorAll(".js-btn-back")),(e=>{e.length&&Array.from(e,e=>{const t=e.querySelectorAll(".checkbox__input"),r=e.querySelector('.checkbox__input[value="all"]'),n=Array.from(t).filter(e=>e!==r);Array.from(t,e=>{e.addEventListener("change",()=>{r&&(r===e?n.forEach(e=>e.checked=r.checked):r.checked=n.every(e=>!0===e.checked))})})})})(document.querySelectorAll(".checkbox-group")),(e=>{0!==e.length&&window.addEventListener("click",t=>{const r=t.target.closest(".context-menu");Array.from(e,e=>{e.classList.toggle("is-open",e===r&&!1===r.classList.contains("is-open"))})})})(document.querySelectorAll(".context-menu")),(e=>{if(e){const t=(t=0)=>{Array.from(e.querySelectorAll(".dashboard__desc"),e=>{t<e.clientHeight&&(t=e.clientHeight)}),document.documentElement.style.setProperty("--dashboardDescHeighgt",t+"px")};PubSub.subscribe("windowWidthResize",()=>t()),t()}})(document.querySelector(".dashboard")),(e=>{0!==e.length&&(Array.from(e,e=>{const t=e.closest("form"),r=e.querySelector(".input-datalist__input"),n=(e.querySelector(".input-datalist__list"),e.querySelectorAll(".input-datalist__item")),o=e.classList.contains("in-workgroup-add-user");e.addEventListener("close",()=>{r.value="",Array.from(n,e=>e.classList.remove("input-datalist__item--hide")),e.classList.remove("is-focus")}),o&&Array.from(n,t=>{t.querySelector(".input-datalist__radio").addEventListener("change",()=>{t.classList.add("visuallyhidden"),r.focus(),r.value&&e.dispatchEvent(new CustomEvent("close"))})}),r.addEventListener("focus",()=>e.classList.add("is-focus")),r.addEventListener("input",()=>{e.classList.add("is-focus");const i=r.value.toLowerCase();i.length?Array.from(n,e=>{const t=e.querySelector(".input-datalist__filter").textContent.trim().toLowerCase();e.classList.toggle("input-datalist__item--hide",-1===t.indexOf(i))}):Array.from(n,e=>e.classList.remove("input-datalist__item--hide")),o&&t.classList.toggle("is-empty",Array.from(n).every(e=>e.classList.contains("visuallyhidden")||e.classList.contains("input-datalist__item--hide")))})}),window.addEventListener("click",t=>{null===t.target.closest(".input-datalist")&&Array.from(e,e=>e.classList.remove("is-focus"))}))})(document.querySelectorAll(".input-datalist")),(e=>{e.length&&Array.from(e,e=>{const t=e.querySelector(".form-required__submit");e.addEventListener("input",()=>{let r=!0;Array.from(e.querySelectorAll("[required]"),t=>{"radio"===t.type&&0===e.querySelectorAll('[name="'+t.name+'"]:checked').length?r=!1:"none"!==t.value&&0!==t.value.length||(r=!1)}),t.disabled=!r})})})(document.querySelectorAll(".form-required")),(e=>{if(!e)return;const t=e.querySelector(".form-workgroup-add-user__submit"),r=(e.querySelectorAll(".form-workgroup-add-user__user"),e.querySelector(".workgroup-add-user__list-head")),n=e.querySelector(".workgroup-add-user__foot"),o=e.querySelector(".workgroup-add-user__result"),i=e.querySelector(".form-workgroup-add-user__btn-next-custom"),s=e.querySelector(".form-workgroup-add-user__custom-name"),a=e.querySelector(".form-workgroup-add-user__custom-email"),l=e.querySelector(".form-workgroup-add-user__submit-custom"),c=e.querySelector("#workgroup-add-user-template").innerHTML,u=e.querySelector("#workgroup-add-user-template-custom").innerHTML;const d=()=>{l.disabled=0===s.value.length||0===a.value.length},m=e=>{t.disabled=e,r.classList.toggle("hide",e),n.classList.toggle("hide",e)};e.addEventListener("change",e=>{if(e.target.classList.contains("form-workgroup-add-user__user")){const t=e.target.value,r=e.target.nextElementSibling;avatar=r.querySelector(".workgroup-user__head").innerHTML,name=r.querySelector(".workgroup-user__name").textContent.trim(),desc=r.querySelector(".workgroup-user__desc").textContent.trim(),o.insertAdjacentHTML("afterbegin",Mustache.render(c,{id:t,avatar:avatar,name:name,desc:desc})),m(!1)}}),i.addEventListener("click",()=>{s.focus(),i.closest(".input-datalist").dispatchEvent(new CustomEvent("close"))}),s.addEventListener("input",()=>d()),a.addEventListener("input",()=>d()),l.addEventListener("click",()=>{const e=s.value.trim(),t=a.value.trim();let r="";-1===e.indexOf(" ")?r=e:e.split(" ").forEach(e=>{r+=e.substr(0,1)}),r=r.substr(0,2),o.insertAdjacentHTML("afterbegin",Mustache.render(u,{avatar:r,name:e,email:t})),s.value="",a.value="",l.disabled=!0,m(!1)}),o.addEventListener("click",t=>{const r=t.target.closest(".workgroup-add-user__new-remove");if(r){const t=r.getAttribute("data-id");if("custom"!==t){const r=e.querySelector('.form-workgroup-add-user__user[value="'+t+'"]');r.checked=!1,r.closest(".form-workgroup-add-user__user-wrap").classList.remove("visuallyhidden")}setTimeout(()=>{r.closest(".workgroup-add-user__new").remove(),o.querySelector(".workgroup-add-user__new")||m(!0)})}}),e.addEventListener("submit",r=>{r.preventDefault(),e.classList.add("is-loading"),t.disabled=!0,fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then(e=>e.json()).then(t=>{console.log(t),e.classList.remove("is-loading"),t(...t),o.innerHTML="",m(!0)})}),e.addEventListener("reset",()=>{o.innerHTML="",m(!0),Array.from(document.querySelectorAll(".form-workgroup-add-user__user-wrap"),e=>e.classList.remove("visuallyhidden"))})})(document.querySelector(".form-workgroup-add-user")),(e=>{e.length&&Array.from(e,e=>{const t=e.querySelector(".form__submit");e.addEventListener("submit",r=>{r.preventDefault(),e.classList.add("is-loading"),t.disabled=!0,fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then(e=>e.json()).then(r=>{if(console.log(r),e.classList.remove("is-loading"),t.disabled=!1,r.notification&&notification(...r.notification),r.redirect){const e=r.redirectDelay?1e3*r.redirectDelay:0;setTimeout(()=>location.assign(r.redirect),e)}r.reset&&e.reset(),r.refresh&&location.reload()})})})})(document.querySelectorAll(".form")),(e=>{e.length&&Array.from(e,e=>{e.querySelector("input").addEventListener("change",()=>{e.querySelector(".input-file__value")&&(e.querySelector(".input-file__value").textContent=e.querySelector("input").value)})})})(document.querySelectorAll(".input-file")),(e=>{e.length&&Array.from(e,e=>{e.addEventListener("change",()=>{event.preventDefault(),e.classList.add("is-loading"),fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then(e=>e.json()).then(t=>{if(console.log(t),e.classList.remove("is-loading"),alert("вырианты ответов: rejected | removed | pending, link "),t.pending){document.querySelector("#modal-invitations-complete-link").href=t.link;const r=new CustomEvent("modalShow",{detail:{selector:"invitations-complete"}});window.modal.dispatchEvent(r),e.remove()}t.rejected&&e.classList.add("invitations--rejected"),t.removed&&(e.addEventListener(window.cssAnimation("transition"),()=>e.remove()),setTimeout(()=>e.classList.add("is-removed")))})})})})(document.querySelectorAll(".invitations")),(e=>{e.length&&(Array.from(e,e=>{const t=[],r=e.querySelector(".live-search-docs__form"),n=r.querySelector(".live-search-docs__input"),o=(r.querySelector(".live-search-docs__reset"),e.querySelector(".live-search-docs__empty"),e.querySelectorAll(".live-search-docs__item")),i=e=>{e.length?t.forEach((t,r)=>{t.some(t=>-1!==t.toLowerCase().indexOf(e.toLowerCase()))?(Array.from(o[r].querySelectorAll(".live-search-docs__string"),(r,n)=>{r.innerHTML=t[n].replace(e,'<span class="highlight">'+e+"</span>")}),o[r].classList.remove("live-search-docs__hide")):(o[r].classList.add("live-search-docs__hide"),Array.from(o[r].querySelectorAll(".live-search-docs__string"),(e,r)=>{e.textContent=t[r]}))}):Array.from(o,(e,r)=>{Array.from(e.querySelectorAll(".live-search-docs__string"),(e,n)=>e.textContent=t[r][n]),e.classList.remove("live-search-docs__hide")})};Array.from(o,(e,r)=>{t[r]=[],Array.from(e.querySelectorAll(".live-search-docs__string"),e=>{t[r].push(e.textContent.trim())})}),n.addEventListener("focus",()=>e.classList.add("is-focus")),r.addEventListener("reset",()=>{r.classList.add("is-empty"),e.classList.remove("is-focus","is-noempty"),i("")}),n.addEventListener("keyup",()=>{r.classList.toggle("is-empty",0===n.value.length),e.classList.toggle("is-noempty",n.value.length),i(n.value)})}),window.addEventListener("click",t=>{const r=t.target.closest(".live-search-docs__form");Array.from(e,e=>{r!==e.querySelector(".live-search-docs__form")&&e.classList.remove("is-focus")})}))})(document.querySelectorAll(".live-search-docs")),(e=>{e&&window.addEventListener("click",t=>{t.target.closest(".header__user-btn")?e.classList.toggle("is-open"):null===t.target.closest(".header__user")&&e.classList.remove("is-open")})})(document.querySelector(".header__user")),(e=>{if(!e)return;const t=e.querySelector(".modal-participants__filter"),r=e.querySelectorAll(".modal-participants__item-filter"),n=e.querySelector(".modal-participants__filter-input");e.addEventListener("click",e=>{e.target.closest(".modal-participants__filter")||(e.target.closest(".modal-participants__btn-open-search")?(t.classList.toggle("hide"),n.focus()):t.classList.add("hide"))}),n.addEventListener("input",()=>{const e=n.value.toLowerCase();t.classList.toggle("is-empty",0===e.length),e.length?Array.from(r,t=>{const r=t.querySelector(".modal-participants__text-filter").textContent.trim().toLowerCase();t.classList.toggle("hide",-1===r.indexOf(e))}):Array.from(r,e=>e.classList.remove("hide"))}),t.addEventListener("submit",e=>{e.preventDefault()}),t.addEventListener("reset",()=>{t.classList.add("is-empty"),Array.from(r,e=>e.classList.remove("hide"))})})(document.querySelector(".modal-participants")),(e=>{if(!e)return;const t=e.querySelectorAll(".modal__item"),r=(document.querySelectorAll("[data-modal]"),document.querySelector(".wrapper"));let n=null,o=window.pageYOffset;e.addEventListener("hide",()=>{document.body.classList.remove("modal-show"),r.style.top=0,window.scrollTo(0,o),n=!1}),e.addEventListener("keyup",t=>{"Escape"===t.key&&e.dispatchEvent(new CustomEvent("hide"))});const i=i=>{if(n||(o=window.pageYOffset),n=e.querySelector(".modal__item--"+i),e.classList.toggle("is-align-start",null!==n.getAttribute("data-modal-is-align-start")),btnPageUp){const e=null!==n.getAttribute("data-modal-is-align-start")?"on":"off";btnPageUp.dispatchEvent(new CustomEvent(e))}Array.from(t,e=>e.classList.toggle("visuallyhidden",e!==n)),r.style.top=-o+"px",document.body.classList.add("modal-show"),window.scrollTo(0,0),n.focus(),PubSub.publish("open-"+i)};e.addEventListener("click",t=>{(t.target.classList.contains("modal")||t.target.closest(".modal__close"))&&e.dispatchEvent(new CustomEvent("hide"))}),document.addEventListener("click",e=>{let t=e.target;for(;t!==document;)t.hasAttribute("data-modal")&&i(t.getAttribute("data-modal")),t=t.parentNode}),e.addEventListener("modalShow",e=>i(e.detail.selector)),e.ok=((t,r,n="")=>{e.querySelector(".modal__item--ok").setAttribute("data-mod",n),e.querySelector(".modal__item--ok .modal-mini__title").innerHTML=t||"",e.querySelector(".modal__item--ok .modal-mini__text").innerHTML=r||"",i("ok")})})(document.querySelector(".modal")),(e=>{if(!e)return;const t=document.querySelector("#notification-template").innerHTML;window.notification=((r,n,o=10)=>{e.insertAdjacentHTML("beforeend",Mustache.render(t,{head:r,text:n}));const i=e.querySelector(".is-new");setTimeout(()=>{i.classList.remove("is-new"),i.style.height=i.clientHeight+"px"},100),i.addEventListener(window.cssAnimation("transition"),()=>{i.classList.contains("is-hide")&&i.remove()}),i.addEventListener("click",()=>{i.classList.add("is-hide")}),setTimeout(()=>{i.classList.add("is-hide")},1e3*o)});const r=()=>{let e=document.querySelector(".header").getBoundingClientRect().bottom-window.pageYOffset;document.documentElement.style.setProperty("--notificationTop",e<10?10:e+"px")};window.addEventListener("scroll",()=>window.requestAnimationFrame(()=>r())),r()})(document.querySelector(".notification")),(()=>{if(btnPageUp){btnPageUp.addEventListener("off",()=>btnPageUp.classList.add("hide")),btnPageUp.addEventListener("on",()=>btnPageUp.classList.remove("hide")),btnPageUp.addEventListener("click",()=>document.body.scrollIntoView({behavior:"smooth"}));let e=null;window.addEventListener("scroll",()=>{window.requestAnimationFrame(()=>{!1===btnPageUp.classList.contains("hide")&&null===e&&(e=setTimeout(()=>{e=null,btnPageUp.classList.toggle("is-hidden",window.pageYOffset<document.documentElement.clientHeight)},100))})})}})(),window.selects=(e=>{if(e.querySelector(".select__list"))return;const t=document.createElement("div");t.className="select__value",t.innerHTML='<span class="select__value-inner"></span>',t.insertAdjacentHTML("beforeend",'<svg width="24" height="24" viewBox="0 0 24 24"><path d="M12 14.5L16 10H8L12 14.5Z"/></svg>'),e.appendChild(t);const r=e.closest("form"),n=e.querySelector("select"),o=e.querySelectorAll("option"),i=e.querySelector(".select__value-inner"),s=(e.classList.contains("select--filter"),document.createElement("div"));s.className="select__list";const a=n.querySelector('[value="'+n.value+'"]').textContent;(n.disabled||"none"===n.value||""===n.value)&&e.classList.add("select--default"),""!==n.value&&(i.textContent=e.querySelector('option[value="'+n.value+'"]').textContent),Array.from(o,t=>{if(t.disabled||"none"===t.value||""===t.value)return;const r=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input");r.className="select__list-item",a.type="radio",a.name=n.name,a.value=t.value,o.textContent=t.textContent,n.value===t.value&&(a.checked=!0),n.required&&(a.required=!0),a.addEventListener("change",()=>{i.textContent=t.textContent,e.classList.remove("select--open")}),r.appendChild(a),r.appendChild(o),s.appendChild(r)}),e.appendChild(s),r&&r.addEventListener("reset",()=>{e.classList.add("select--default"),i.textContent=a}),n.remove()}),window.selectsCollection=document.querySelectorAll(".select"),window.selectsCollection.length&&Array.from(window.selectsCollection,e=>window.selects(e)),window.addEventListener("click",e=>{const t=e.target.closest(".select");Array.from(window.selectsCollection,e=>{e.classList.toggle("select--open",e===t&&!1===t.classList.contains("select--open"))})}),(e=>{e.length&&Array.from(e,e=>{const t=e.querySelector(".tab-filter__form"),r=e.querySelectorAll(".tab-filter__item");t&&t.addEventListener("change",()=>{const e=t.elements.filter.value;Array.from(r,t=>{"all"===e?t.classList.remove("hide"):t.classList.toggle("hide",t.getAttribute("data-filter")!==e)})})})})(document.querySelectorAll(".tab-filter")),(e=>{e.length&&Array.from(e,e=>{e.addEventListener("submit",t=>{t.preventDefault(),fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then(e=>e.json()).then(t=>{console.log(t);const r=e.closest("table-workgroups").querySelectorAll(".table-workgroups-unread-item");Array.from(r,e=>e.classList.remove("table-workgroups-unread-item"))})})})})(document.querySelectorAll(".table-workgroups-read-all")),(e=>{if(!e)return;const t=e.querySelector(".workgroup-chat-form-group");if(t){const r=t.querySelectorAll(".workgroup-chat-form-group__btn"),n=e=>{t.classList.remove("is-chat","is-message","is-user"),t.classList.add("is-"+e),"chat"===e?m():p()};Array.from(r,e=>{e.addEventListener("click",()=>n(e.getAttribute("data-item")))});const o=t.querySelector(".workgroup-chat-form"),i=(o.querySelector(".workgroup-chat-form__submit"),o.querySelector(".workgroup-chat-form__input")),s=o.querySelector(".workgroup-chat-form__btn-file"),a=o.querySelector(".workgroup-chat-form__reply"),l=a.querySelector(".workgroup-chat-form__reply-remove"),c=document.querySelector("#workgroup-item-chat-remove-post");list=e.querySelector(".workgroup-chat__list");const u=()=>{alert("в ответе ждум html .workgroup-chat__item")};o.addEventListener("submit",e=>{e.preventDefault(),0!==i.value.length&&(u(),i.value="")}),l.addEventListener("click",()=>{a.classList.add("hide"),o.elements.reply.value=""}),s.addEventListener("click",()=>{const e="workgroup-item-chat-input-file";document.querySelector("#"+e).action=o.action,document.querySelector("#"+e).elements.reply.value=o.elements.reply.value;const t=new CustomEvent("modalShow",{detail:{selector:e}});window.modal.dispatchEvent(t)}),list.addEventListener("click",e=>{const t=e.target.closest(".workgroup-chat__item-btn");if(t){const e=t.closest(".workgroup-chat__item"),r=e.getAttribute("data-id-post");if(t.classList.contains("is-reply")&&(n("chat"),a.querySelector(".workgroup-chat-form__reply-name").textContent=e.querySelector(".workgroup-chat-item__name-value").textContent,a.querySelector(".workgroup-chat-form__reply-text").textContent=e.querySelector(".workgroup-chat-item__text-value").textContent,a.classList.remove("hide"),o.elements.reply.value=r,i.value="",i.focus()),t.classList.contains("is-remove")){c.elements.id.value=r;const e=new CustomEvent("modalShow",{detail:{selector:"workgroup-item-chat-remove-post"}});window.modal.dispatchEvent(e)}}}),c.addEventListener("submit",e=>{e.preventDefault(),c.querySelector(".is-submit").disabled=!0,fetch(c.getAttribute("action"),{method:"POST",body:new FormData(c)}).then(e=>e.json()).then(e=>{console.log(e),modal.dispatchEvent(new CustomEvent("hide")),c.querySelector(".is-submit").disabled=!1,list.querySelector('[data-id-post="'+e.id+'"]').remove(),e.notification&&notification(...e.notification)})});const d=t.querySelector(".workgroup-chat-filter"),m=()=>{console.log("reset"),d.classList.add("is-empty"),p(),Array.from(e.querySelectorAll(".workgroup-chat-item__filter-item"),e=>e.classList.remove("hide"))},p=()=>{Array.from(d.querySelectorAll(".input"),e=>{null!==e.offsetParent&&e.focus()})};d.addEventListener("submit",e=>{e.preventDefault()}),d.addEventListener("reset",m),d.addEventListener("input",t=>{const r=t.target.value;d.classList.toggle("is-empty",0===r.length),Array.from(e.querySelectorAll(".workgroup-chat-item__filter-"+t.target.name),e=>{e.closest(".workgroup-chat-item__filter-item").classList.toggle("hide",-1===e.textContent.toLowerCase().indexOf(r.toLowerCase()))})})}const r=document.querySelector(".modal-chat-input-file");if(r){const e=r.querySelector(".modal-chat-input-file__submit"),t=r.querySelector(".modal-chat-input-file__input");r.addEventListener("change",n=>{e.disabled=0===t.value.length,n.target===t&&(r.querySelector(".modal-chat-input-file__value").textContent=t.value)})}})(document.querySelector(".workgroup-chat")),(e=>{if(!e)return;const t=e.querySelector(".workgroup-item-action__exit");t&&t.addEventListener("click",()=>{document.querySelector(".modal__item--workgroup-item-exit").elements.id.value=t.getAttribute("data-id");const e=new CustomEvent("modalShow",{detail:{selector:"workgroup-item-exit"}});window.modal.dispatchEvent(e)})})(document.querySelector(".workgroup-item")),(e=>{if(!e)return;const t=e.querySelector(".workgroup-item-stage-lang");t&&t.addEventListener("change",()=>{Array.from(t.querySelectorAll("[data-lang]"),e=>{e.classList.toggle("hide",e.getAttribute("data-lang")!==t.elements.lang.value)})});const r=e.querySelector(".workgroup-item-stage-vote");if(r){const e=r.querySelector(".workgroup-item-stage-vote__form"),t=r.querySelectorAll(".workgroup-item-stage-vote__cancel");e.addEventListener("change",()=>{e.classList.add("is-loading"),fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e)}).then(e=>e.json()).then(t=>{if(console.log(t),e.classList.remove("is-loading"),e.reset(),"1"===t.vote)notification(...t.notification);else{const e=new CustomEvent("modalShow",{detail:{selector:"workgroup-item-stage-vote"}});window.modal.dispatchEvent(e)}})}),Array.from(t,t=>{const r=t.querySelector(".workgroup-item-stage-vote__cancel-btn");t.addEventListener("submit",n=>{n.preventDefault(),r.disabled=!0,fetch(t.getAttribute("action"),{method:"POST",body:new FormData(t)}).then(e=>e.text()).then(n=>{e.classList.remove("hide"),t.classList.add("hide"),r.disabled=!0})})})}const n=document.querySelector("#workgroup-item-stage-vote-against");if(n){const e=n.querySelector(".modal-stage-vote__submit"),t=n.querySelector(".modal-stage-vote__input-file-input");n.addEventListener("submit",r=>{r.preventDefault(),0===t.value.length?notification(...n.getAttribute("data-required").split("|"),99):(e.disabled=!0,n.classList.add("is-loading"),fetch(n.getAttribute("action"),{method:"POST",body:new FormData(n)}).then(e=>e.json()).then(e=>{console.log(e),modal.dispatchEvent(new CustomEvent("hide"))}))}),n.addEventListener("change",r=>{e.disabled=0===t.value.length,r.target===t&&(n.querySelector(".modal-stage-vote__input-file-text").textContent=t.value)})}})(document.querySelector(".workgroup-item-stage")),(e=>{if(0!==e.length){if("en"===Cookies.get("lang")){const e=document.createElement("div");e.id="ytWidget",e.style.display="none",document.body.appendChild(e);const t=document.createElement("script");t.src="https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=ru&widgetTheme=light&autoMode=false",document.head.appendChild(t)}Array.from(e,e=>{e.addEventListener("click",()=>{localStorage.setItem("yt-widget",JSON.stringify({lang:e.getAttribute("data-lang"),active:!0})),Cookies.set("lang",e.getAttribute("data-lang")),location.reload()})})}})(document.querySelectorAll(".header__lang-btn"));